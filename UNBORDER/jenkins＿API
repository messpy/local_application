import requests

def download_build_result(jenkins_url, job_name, build_number):
    try:
        # Jenkinsのビルド結果取得用のAPIエンドポイント
        api_url = f"{jenkins_url}/job/{job_name}/{build_number}/api/json"
        
        # APIにGETリクエストを送信
        response = requests.get(api_url)
        response.raise_for_status()  # エラーチェック
        
        # JSONから必要な情報を抽出
        build_info = response.json()
        artifact_url = build_info["artifacts"][0]["relativePath"]
        
        # ダウンロード用のAPIエンドポイント
        download_url = f"{jenkins_url}/job/{job_name}/{build_number}/artifact/{artifact_url}"
        
        # ファイルをダウンロード
        response = requests.get(download_url)
        response.raise_for_status()  # エラーチェック
        
        # ファイルに保存
        with open("downloaded_file.zip", "wb") as file:
            file.write(response.content)
        
        print("ファイルをダウンロードしました。")

    except requests.exceptions.RequestException as e:
        print(f"エラー: {e}")

# 使用例
jenkins_url = "http://your-jenkins-server"  # JenkinsサーバーのURL
job_name = "your-job-name"  # Jenkinsジョブの名前
build_number = "build-number"  # Jenkinsビルドの番号
download_build_result(jenkins_url, job_name, build_number)